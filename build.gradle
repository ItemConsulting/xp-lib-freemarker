plugins {
  id 'maven-publish'
  id "com.enonic.xp.app" version "1.0.17"
}

compileJava.options.encoding = "UTF-8"

xp {
  version = xpVersion
}

app {
	name = project.appName
	displayName = project.displayName
	vendorName = project.vendorName
	vendorUrl = project.vendorUrl
	systemVersion = xpVersion
}

dependencies {
	compile "com.enonic.xp:core-api:${xpVersion}"
  	compile "com.enonic.xp:portal-api:${xpVersion}"
	compile "org.freemarker:freemarker:2.3.27-incubating"
}

repositories {
	mavenLocal()
	jcenter()
	xp.enonicRepo()
}

publishing {
	publications {
		maven( MavenPublication ) {
			groupId 'no.tine.xp'
			artifactId 'xp-lib-freemarker'
			version "$version"
			from components.java
		}
	}

	repositories {
		maven {
			url 'https://pkgs.dev.azure.com/tine-sa/_packaging/digitale-flater/maven/v1'
			credentials {
				username "AZURE_ARTIFACTS"
				password System.getenv("AZURE_ARTIFACTS_ENV_ACCESS_TOKEN") ?: "${azureArtifactsGradleAccessToken}"
			}
		}
	}
}

version = "${jarVersion}"
jar.archiveName = "${jar.baseName}.${jar.extension}"
